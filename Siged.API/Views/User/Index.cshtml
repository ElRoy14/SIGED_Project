@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Users</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <style>
        /* Custom styles */
        .table thead th {
            background-color: #343a40;
            color: #fff;
        }

        .table tbody tr:hover {
            background-color: #f8f9fa;
        }

        .btn-custom {
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div class="d-flex justify-content-between mb-4">
            <h3>All Users</h3>
            <button class="btn btn-primary btn-custom" id="btn-register">Register</button>
        </div>
        <div id="userList" class="table-responsive"></div>
    </div>

    <!-- Modal for Editing User -->
    <div class="modal fade" id="editUserModal" tabindex="-1" aria-labelledby="editUserModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editUserModalLabel">Edit User</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editUserForm">
                        <div class="mb-3">
                            <label for="editIdentificationCard" class="form-label">Identification Card</label>
                            <input type="text" class="form-control" id="editIdentificationCard" name="identificationCard" required>
                        </div>
                        <div class="mb-3">
                            <label for="editFullName" class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="editFullName" name="fullName" required>
                        </div>
                        <div class="mb-3">
                            <label for="editPhoneNumber" class="form-label">Phone Number</label>
                            <input type="text" class="form-control" id="editPhoneNumber" name="phoneNumber" required>
                        </div>
                        <div class="mb-3">
                            <label for="editEmail" class="form-label">Email</label>
                            <input type="email" class="form-control" id="editEmail" name="email" required>
                        </div>
                        <div class="mb-3">
                            <label for="editUserPassword" class="form-label">Password</label>
                            <input type="password" class="form-control" id="editUserPassword" name="userPassword" required>
                        </div>
                        <div class="mb-3">
                            <label for="editRolId" class="form-label">Role</label>
                            <select class="form-control" id="editRolId" name="rolId" required>
                                @foreach (var rol in ViewBag.Roles)
                                {
                                    <option value="@rol.rolId">@rol.Description</option>
                                }
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="editJobTitleId" class="form-label">Job Title</label>
                            <select class="form-control" id="editJobTitleId" name="jobTitleId" required></select>
                        </div>
                        <div class="mb-3">
                            <label for="editDepartmentId" class="form-label">Department</label>
                            <select class="form-control" id="editDepartmentId" name="departmentId" required></select>
                        </div>
                        <div class="mb-3">
                            <label for="editSalaryId" class="form-label">Salary</label>
                            <select class="form-control" id="editSalaryId" name="salaryId" required></select>
                        </div>
                        <div class="mb-3">
                            <label for="editIsActive" class="form-label">Is Active</label>
                            <select class="form-control" id="editIsActive" name="isActive" required>
                                <option value="1">Active</option>
                                <option value="0">Inactive</option>
                            </select>
                        </div>
                        <input type="hidden" id="editUserId" name="userId">
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="saveUserChanges">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function () {
            var token = localStorage.getItem('token');
            if (!token) {
                window.location.href = '/home/login';
                return;
            }

            $('#btn-register').click(function () {
                window.location.href = '/user/register';
            });

            // // Function to load select options from API
            // function loadSelectOptions(selectId, apiUrl, placeholder) {
            //     $.ajax({
            //         url: apiUrl,
            //         type: 'GET',
            //         headers: {
            //             'Authorization': 'Bearer ' + token
            //         },
            //         success: function (response) {
            //             if (response.status) {
            //                 var options = '<option value="">' + placeholder + '</option>';
            //                 response.value.forEach(function (item) {
            //                     options += '<option value="' + item.rolId + '">' + item.nameRol + '</option>';
            //                 });
            //                 $(selectId).html(options);
            //             } else {
            //                 console.error(response.message);
            //             }
            //         },
            //         error: function (xhr, status, error) {
            //             console.error(xhr.responseText);
            //         }
            //     });
            // }

            // function loadSelects() {
            //     loadSelectOptions('#editRolId', '/api/Rol/GetAllRoles', 'Select Role');
            //     loadSelectOptions('#editJobTitleId', '/api/JobTitle/GetAllJobTitle', 'Select Job Title');
            //     loadSelectOptions('#editDepartmentId', '/api/Department/GetAllDepartment', 'Select Department');
            //     loadSelectOptions('#editSalaryId', '/api/Salary/GetAllSalary', 'Select Salary');
            // }

            $(document).on('click', '.btn-edit', function () {
                var userId = $(this).data('userid');
                var identificationCard = $('#identificationCard_' + userId).text();
                var fullName = $('#fullName_' + userId).text();
                var phoneNumber = $('#phoneNumber_' + userId).text();
                var email = $('#email_' + userId).text();
                var userPassword = $('#userPassword_' + userId).text();
                var rolId = $('#rolId_' + userId).text();
                var jobTitleId = $('#jobTitleId_' + userId).text();
                var departmentId = $('#departmentId_' + userId).text();
                var salaryId = $('#salaryId_' + userId).text();
                var isActive = $('#isActive_' + userId).text();

                $('#editIdentificationCard').val(identificationCard);
                $('#editFullName').val(fullName);
                $('#editPhoneNumber').val(phoneNumber);
                $('#editEmail').val(email);
                $('#editUserPassword').val(userPassword);
                $('#editRolId').val(rolId);
                $('#editJobTitleId').val(jobTitleId);
                $('#editDepartmentId').val(departmentId);
                $('#editSalaryId').val(salaryId);
                $('#editIsActive').val(isActive);
                $('#editUserId').val(userId);

                loadSelects();

                $('#editUserModal').modal('show');
            });

            $('#saveUserChanges').click(function () {
                var userId = $('#editUserId').val();
                var identificationCard = $('#editIdentificationCard').val();
                var fullName = $('#editFullName').val();
                var phoneNumber = $('#editPhoneNumber').val();
                var email = $('#editEmail').val();
                var userPassword = $('#editUserPassword').val();
                var rolId = $('#editRolId').val();
                var jobTitleId = $('#editJobTitleId').val();
                var departmentId = $('#editDepartmentId').val();
                var salaryId = $('#editSalaryId').val();
                var isActive = $('#editIsActive').val();

                var userData = {
                    userId: userId,
                    identificationCard: identificationCard,
                    fullName: fullName,
                    phoneNumber: phoneNumber,
                    email: email,
                    userPassword: userPassword,
                    rolId: rolId,
                    jobTitleId: jobTitleId,
                    departmentId: departmentId,
                    salaryId: salaryId,
                    isActive: isActive
                };

                $.ajax({
                    url: '/api/User/UpdateUser',
                    type: 'PUT',
                    contentType: 'application/json',
                    data: JSON.stringify(userData),
                    headers: {
                        'Authorization': 'Bearer ' + token
                    },
                    success: function (response) {
                        if (response.status) {
                            $('#editUserModal').modal('hide');
                            loadUsers();
                        } else {
                            alert(response.message);
                        }
                    },
                    error: function (xhr, status, error) {
                        console.error(xhr.responseText);
                    }
                });
            });

            $(document).on('click', '.btn-delete', function () {
                var userId = $(this).data('userid');

                $.ajax({
                    url: '/api/User/DeleteUser/' + userId,
                    type: 'DELETE',
                    headers: {
                        'Authorization': 'Bearer ' + token
                    },
                    success: function (response) {
                        if (response.status) {
                            loadUsers();
                        } else {
                            alert(response.message);
                        }
                    },
                    error: function (xhr, status, error) {
                        console.error(xhr.responseText);
                    }
                });
            });

            function loadUsers() {
                $.ajax({
                    url: '/api/User/GetAllUsers',
                    type: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + token
                    },
                    success: function (response) {
                        if (response.status) {
                            var users = response.value;
                            var userListHtml = '<table class="table table-bordered table-hover"><thead><tr><th>ID</th><th>Cedula</th><th>Nombre</th><th>Telefono</th><th>Correo</th><th>Rol</th><th>Cargo</th><th>Departamento</th><th>Salario</th><th>Active State</th><th>Acciones</th></tr></thead><tbody>';
                            users.forEach(function (user) {
                                userListHtml += '<tr>' +
                                    '<td>' + user.userId + '</td>' +
                                    '<td id="identificationCard_' + user.userId + '">' + user.identificationCard + '</td>' +
                                    '<td id="fullName_' + user.userId + '">' + user.fullName + '</td>' +
                                    '<td id="phoneNumber_' + user.userId + '">' + user.phoneNumber + '</td>' +
                                    '<td id="email_' + user.userId + '">' + user.email + '</td>' +
                                    '<td id="rolDescription_' + user.userId + '">' + user.rolDescription + '</td>' +
                                    '<td id="jobTitleDescription_' + user.userId + '">' + user.jobTitleDescription + '</td>' +
                                    '<td id="departmentDescription_' + user.userId + '">' + user.departmentDescription + '</td>' +
                                    '<td id="salaryDescription_' + user.userId + '">' + user.salaryDescription + '</td>' +
                                    '<td id="isActive_' + user.userId + '">' + user.isActive + '</td>' +
                                    '<td>' +
                                    '<button class="btn btn-sm btn-warning btn-custom btn-edit" data-userid="' + user.userId + '">Editar</button>' +
                                    '<button class="btn btn-sm btn-danger btn-custom btn-delete" data-userid="' + user.userId + '">Eliminar</button>' +
                                    '</td>' +
                                    '</tr>';
                            });
                            userListHtml += '</tbody></table>';
                            $('#userList').html(userListHtml);
                        } else {
                            $('#userList').html('<div class="alert alert-danger">' + response.message + '</div>');
                        }
                    },
                    error: function (xhr, status, error) {
                        console.error(xhr.responseText);
                    }
                });
            }

            loadUsers();
        });
    </script>
</body>
</html>


@* <!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Users</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <style>
        /* Custom styles */
        .table thead th {
            background-color: #343a40;
            color: #fff;
        }

        .table tbody tr:hover {
            background-color: #f8f9fa;
        }

        .btn-custom {
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div class="d-flex justify-content-between mb-4">
            <h3>All Users</h3>
            <button class="btn btn-primary btn-custom" id="btn-register">Register</button>
        </div>
        <div id="userList" class="table-responsive"></div>
    </div>

    <!-- Modal for Editing User -->
    <div class="modal fade" id="editUserModal" tabindex="-1" aria-labelledby="editUserModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editUserModalLabel">Edit User</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editUserForm">
                        <div class="mb-3">
                            <label for="editIdentificationCard" class="form-label">Identification Card</label>
                            <input type="text" class="form-control" id="editIdentificationCard" name="identificationCard" required>
                        </div>
                        <div class="mb-3">
                            <label for="editFullName" class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="editFullName" name="fullName" required>
                        </div>
                        <div class="mb-3">
                            <label for="editPhoneNumber" class="form-label">Phone Number</label>
                            <input type="text" class="form-control" id="editPhoneNumber" name="phoneNumber" required>
                        </div>
                        <div class="mb-3">
                            <label for="editEmail" class="form-label">Email</label>
                            <input type="email" class="form-control" id="editEmail" name="email" required>
                        </div>
                        <div class="mb-3">
                            <label for="editUserPassword" class="form-label">Password</label>
                            <input type="password" class="form-control" id="editUserPassword" name="userPassword" required>
                        </div>
                        <div class="mb-3">
                            <label for="editRolDescription" class="form-label">Role Description</label>
                            <input type="text" class="form-control" id="editRolDescription" name="rolDescription" required>
                        </div>
                        <div class="mb-3">
                            <label for="editJobTitleDescription" class="form-label">Job Title</label>
                            <input type="text" class="form-control" id="editJobTitleDescription" name="jobTitleDescription" required>
                        </div>
                        <div class="mb-3">
                            <label for="editDepartmentDescription" class="form-label">Department</label>
                            <input type="text" class="form-control" id="editDepartmentDescription" name="departmentDescription" required>
                        </div>
                        <div class="mb-3">
                            <label for="editSalaryDescription" class="form-label">Salary</label>
                            <input type="number" class="form-control" id="editSalaryDescription" name="salaryDescription" required>
                        </div>
                        <div class="mb-3">
                            <label for="editIsActive" class="form-label">Is Active</label>
                            <select class="form-control" id="editIsActive" name="isActive" required>
                                <option value="1">Active</option>
                                <option value="0">Inactive</option>
                            </select>
                        </div>
                        <input type="hidden" id="editUserId" name="userId">
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="saveUserChanges">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function () {
            var token = localStorage.getItem('token');
            if (!token) {
                window.location.href = '/home/login';
                return;
            }

            $('#btn-register').click(function () {
                window.location.href = '/user/register';
            });

            $(document).on('click', '.btn-edit', function () {
                var userId = $(this).data('userid');
                var identificationCard = $('#identificationCard_' + userId).text();
                var fullName = $('#fullName_' + userId).text();
                var phoneNumber = $('#phoneNumber_' + userId).text();
                var email = $('#email_' + userId).text();
                var userPassword = $('#userPassword_' + userId).text();
                var rolDescription = $('#rolDescription_' + userId).text();
                var jobTitleDescription = $('#jobTitleDescription_' + userId).text();
                var departmentDescription = $('#departmentDescription_' + userId).text();
                var salaryDescription = $('#salaryDescription_' + userId).text();
                var isActive = $('#isActive_' + userId).text();

                $('#editIdentificationCard').val(identificationCard);
                $('#editFullName').val(fullName);
                $('#editPhoneNumber').val(phoneNumber);
                $('#editEmail').val(email);
                $('#editUserPassword').val(userPassword);
                $('#editRolDescription').val(rolDescription);
                $('#editJobTitleDescription').val(jobTitleDescription);
                $('#editDepartmentDescription').val(departmentDescription);
                $('#editSalaryDescription').val(salaryDescription);
                $('#editIsActive').val(isActive);
                $('#editUserId').val(userId);

                $('#editUserModal').modal('show');
            });

            $('#saveUserChanges').click(function () {
                var userId = $('#editUserId').val();
                var identificationCard = $('#editIdentificationCard').val();
                var fullName = $('#editFullName').val();
                var phoneNumber = $('#editPhoneNumber').val();
                var email = $('#editEmail').val();
                var userPassword = $('#editUserPassword').val();
                var rolDescription = $('#editRolDescription').val();
                var jobTitleDescription = $('#editJobTitleDescription').val();
                var departmentDescription = $('#editDepartmentDescription').val();
                var salaryDescription = $('#editSalaryDescription').val();
                var isActive = $('#editIsActive').val();

                var userData = {
                    userId: userId,
                    identificationCard: identificationCard,
                    fullName: fullName,
                    phoneNumber: phoneNumber,
                    email: email,
                    userPassword: userPassword,
                    rolDescription: rolDescription,
                    jobTitleDescription: jobTitleDescription,
                    departmentDescription: departmentDescription,
                    salaryDescription: salaryDescription,
                    isActive: isActive
                };

                $.ajax({
                    url: '/api/User/UpdateUser',
                    type: 'PUT',
                    contentType: 'application/json',
                    data: JSON.stringify(userData),
                    headers: {
                        'Authorization': 'Bearer ' + token
                    },
                    success: function (response) {
                        if (response.status) {
                            $('#editUserModal').modal('hide');
                            loadUsers();
                        } else {
                            alert(response.message);
                        }
                    },
                    error: function (xhr, status, error) {
                        console.error(xhr.responseText);
                    }
                });
            });

            $(document).on('click', '.btn-delete', function () {
                var userId = $(this).data('userid');

                $.ajax({
                    url: '/api/User/DeleteUser/' + userId,
                    type: 'DELETE',
                    headers: {
                        'Authorization': 'Bearer ' + token
                    },
                    success: function (response) {
                        if (response.status) {
                            loadUsers();
                        } else {
                            alert(response.message);
                        }
                    },
                    error: function (xhr, status, error) {
                        console.error(xhr.responseText);
                    }
                });
            });

            function loadUsers() {
                $.ajax({
                    url: '/api/User/GetAllUsers',
                    type: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + token
                    },
                    success: function (response) {
                        if (response.status) {
                            var users = response.value;
                            var userListHtml = '<table class="table table-bordered table-hover"><thead><tr><th>ID</th><th>Cedula</th><th>Nombre</th><th>Telefono</th><th>Correo</th><th>Rol</th><th>Cargo</th><th>Departamento</th><th>Salario</th><th>Active State</th><th>Acciones</th></tr></thead><tbody>';
                            users.forEach(function (user) {
                                userListHtml += '<tr>' +
                                    '<td>' + user.userId + '</td>' +
                                    '<td id="identificationCard_' + user.userId + '">' + user.identificationCard + '</td>' +
                                    '<td id="fullName_' + user.userId + '">' + user.fullName + '</td>' +
                                    '<td id="phoneNumber_' + user.userId + '">' + user.phoneNumber + '</td>' +
                                    '<td id="email_' + user.userId + '">' + user.email + '</td>' +
                                    '<td id="rolDescription_' + user.userId + '">' + user.rolDescription + '</td>' +
                                    '<td id="jobTitleDescription_' + user.userId + '">' + user.jobTitleDescription + '</td>' +
                                    '<td id="departmentDescription_' + user.userId + '">' + user.departmentDescription + '</td>' +
                                    '<td id="salaryDescription_' + user.userId + '">' + user.salaryDescription + '</td>' +
                                    '<td id="isActive_' + user.userId + '">' + user.isActive + '</td>' +
                                    '<td>' +
                                    '<button class="btn btn-sm btn-warning btn-custom btn-edit" data-userid="' + user.userId + '">Editar</button>' +
                                    '<button class="btn btn-sm btn-danger btn-custom btn-delete" data-userid="' + user.userId + '">Eliminar</button>' +
                                    '</td>' +
                                    '</tr>';
                            });
                            userListHtml += '</tbody></table>';
                            $('#userList').html(userListHtml);
                        } else {
                            $('#userList').html('<div class="alert alert-danger">' + response.message + '</div>');
                        }
                    },
                    error: function (xhr, status, error) {
                        console.error(xhr.responseText);
                    }
                });
            }

            loadUsers();
        });
    </script>
</body>
</html> *@



@* <!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Users</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <style>
        /* Custom styles */
        .table thead th {
            background-color: #343a40;
            color: #fff;
        }

        .table tbody tr:hover {
            background-color: #f8f9fa;
        }

        .btn-custom {
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div class="d-flex justify-content-between mb-4">
            <h3>All Users</h3>
            <button class="btn btn-primary btn-custom" id="btn-register">Register</button>
        </div>
        <div id="userList" class="table-responsive"></div>
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function () {
            var token = localStorage.getItem('token');
            if (!token) {
                window.location.href = '/home/login'; // Redirigir al inicio de sesión si no hay token
                return;
            }

            // Controlador de evento para el botón de Registro
            $('#btn-register').click(function () {
                // Redirigir al formulario de registro
                window.location.href = '/user/register';
            });

            // Controlador de evento para el botón de Editar
            $(document).on('click', '.btn-edit', function () {
                var userId = $(this).data('userid');
                var fullName = $('#fullName_' + userId).text();
                var email = $('#email_' + userId).text();
                var rolDescription = $('#rolDescription_' + userId).text();
                var departmentDescription = $('#departmentDescription_' + userId).text();

                // Mostrar campos de edición
                $('#fullName_' + userId).html('<input type="text" id="edit_fullName_' + userId + '" value="' + fullName + '" />');
                $('#email_' + userId).html('<input type="email" id="edit_email_' + userId + '" value="' + email + '" />');
                $('#rolDescription_' + userId).html('<input type="text" id="edit_rolDescription_' + userId + '" value="' + rolDescription + '" />');
                $('#departmentDescription_' + userId).html('<input type="text" id="edit_departmentDescription_' + userId + '" value="' + departmentDescription + '" />');

                // Mostrar botón de Guardar
                $(this).hide();
                $('#btn-save_' + userId).show();
            });

            // Controlador de evento para el botón de Guardar
            $(document).on('click', '.btn-save', function () {
                var userId = $(this).data('userid');
                var fullName = $('#edit_fullName_' + userId).val();
                var email = $('#edit_email_' + userId).val();
                var rolDescription = $('#edit_rolDescription_' + userId).val();
                var departmentDescription = $('#edit_departmentDescription_' + userId).val();

                var userData = {
                    userId: userId,
                    fullName: fullName,
                    email: email,
                    rolDescription: rolDescription,
                    departmentDescription: departmentDescription
                };

                // Realizar solicitud de actualización al servidor
                $.ajax({
                    url: '/api/User/UpdateUser',
                    type: 'PUT',
                    contentType: 'application/json',
                    data: JSON.stringify(userData),
                    headers: {
                        'Authorization': 'Bearer ' + token
                    },
                    success: function (response) {
                        if (response.status) {
                            // Actualizar la vista después de la edición
                            loadUsers();
                        } else {
                            alert(response.message);
                        }
                    },
                    error: function (xhr, status, error) {
                        console.error(xhr.responseText);
                    }
                });
            });

            // Controlador de evento para el botón de Eliminar
            $(document).on('click', '.btn-delete', function () {
                var userId = $(this).data('userid');

                // Realizar solicitud de eliminación al servidor
                $.ajax({
                    url: '/api/User/DeleteUser/' + userId,
                    type: 'DELETE',
                    headers: {
                        'Authorization': 'Bearer ' + token
                    },
                    success: function (response) {
                        if (response.status) {
                            // Actualizar la vista después de la eliminación
                            loadUsers();
                        } else {
                            alert(response.message);
                        }
                    },
                    error: function (xhr, status, error) {
                        console.error(xhr.responseText);
                    }
                });
            });

            // Función para cargar la lista de usuarios
            function loadUsers() {
                $.ajax({
                    url: '/api/User/GetAllUsers',
                    type: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + token
                    },
                    success: function (response) {
                        if (response.status) {
                            var users = response.value;
                            var userListHtml = '<table class="table table-bordered table-hover"><thead><tr><th>ID</th><th>Cedula</th><th>Nombre</th><th>Telefono</th><th>Correo</th><th>Rol</th><th>Cargo</th><th>Departamento</th><th>Salario</th><th>Active State</th><th>Acciones</th></tr></thead><tbody>';
                            users.forEach(function (user) {
                                userListHtml += '<tr>' +
                                    '<td>' + user.userId + '</td>' +
                                    '<td id="identificationCard_' + user.userId + '">' + user.identificationCard + '</td>' +
                                    '<td id="fullName_' + user.userId + '">' + user.fullName + '</td>' +
                                    '<td id="email_' + user.userId + '">' + user.phoneNumber + '</td>' +
                                    '<td id="rolDescription_' + user.userId + '">' + user.email + '</td>' +
                                    '<td id="departmentDescription_' + user.userId + '">' + user.rolDescription + '</td>' +
                                    '<td id="phoneNumber_' + user.userId + '">' + user.jobTitleDescription + '</td>' +
                                    '<td id="password_' + user.userId + '">' + user.departmentDescription + '</td>' +
                                    '<td id="roleId_' + user.userId + '">' + user.salaryDescription + '</td>' +
                                    '<td id="activeState_' + user.userId + '">' + user.isActive + '</td>' +


                                    '<td>' +
                                    '<button class="btn btn-sm btn-warning btn-custom btn-edit" data-userid="' + user.userId + '">Editar</button>' +

                                    '<button class="btn btn-sm btn-danger btn-custom btn-delete" data-userid="' + user.userId + '">Eliminar</button>' +
                                    '<button class="btn btn-sm btn-success btn-save" id="btn-save_' + user.userId + '" data-userid="' + user.userId + '" style="display:none;">Guardar</button>' +
                                    '</td>' +
                                    '</tr>';
                            });
                            userListHtml += '</tbody></table>';
                            $('#userList').html(userListHtml);
                        } else {
                            $('#userList').html('<div class="alert alert-danger">' + response.message + '</div>');
                        }
                    },
                    error: function (xhr, status, error) {
                        console.error(xhr.responseText);
                    }
                });
            }

            // Cargar la lista de usuarios al cargar la página
            loadUsers();
        });
    </script>
</body>
</html> *@
